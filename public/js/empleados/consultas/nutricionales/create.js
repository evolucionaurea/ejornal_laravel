!function(t){var a={};function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var r in t)e.d(n,r,function(a){return t[a]}.bind(null,r));return n},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},e.p="/",e(e.s=52)}({52:function(t,a,e){t.exports=e("FFaB")},FFaB:function(t,a,e){e("SuTX"),$((function(){$(".select_2").select2();var t=document.getElementById("tipo-consulta"),a=document.querySelectorAll(".campos-inicial"),e=document.querySelectorAll(".campos-seguimiento");function n(){var n=t.value;"inicial"===n?(a.forEach((function(t){return t.style.display="block"})),e.forEach((function(t){return t.style.display="none"}))):"seguimiento"===n&&(a.forEach((function(t){return t.style.display="none"})),e.forEach((function(t){return t.style.display="block"})))}document.querySelectorAll('input[type="number"]').forEach((function(t){t.addEventListener("input",(function(t){var a=t.target.value;/^\d{0,3}(\.\d{0,2})?$/.test(a)||(alert("Por favor ingrese un valor válido (máximo 3 dígitos enteros y 2 decimales)."),t.target.value="")}))})),t.addEventListener("change",n),n(),$('[name="fecha_atencion"]').datepicker(),$("input[name='peso'],input[name='altura']").on("keyup change",(function(){var t=$('input[name="peso"]').val(),a=$('input[name="altura"]').val();$("input[name='imc']").val(window.calculate_imc(t,a)),$("input[name='imc_disabled']").val(window.calculate_imc(t,a))}))}))},SuTX:function(t,a){function e(){var t,a,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function u(e,r,o,i){var u=r&&r.prototype instanceof l?r:l,d=Object.create(u.prototype);return n(d,"_invoke",function(e,n,r){var o,i,u,l=0,d=r||[],s=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(a,e){return o=a,i=0,u=t,p.n=e,c}};function f(e,n){for(i=e,u=n,a=0;!s&&l&&!r&&a<d.length;a++){var r,o=d[a],f=p.p,m=o[2];e>3?(r=m===n)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=f&&((r=e<2&&f<o[1])?(i=0,p.v=n,p.n=o[1]):f<m&&(r=e<3||o[0]>n||n>m)&&(o[4]=e,o[5]=n,p.n=m,i=0))}if(r||e>1)return c;throw s=!0,n}return function(r,d,m){if(l>1)throw TypeError("Generator is already running");for(s&&1===d&&f(d,m),i=d,u=m;(a=i<2?t:u)||!s;){o||(i?i<3?(i>1&&(p.n=-1),f(i,u)):p.n=u:p.v=u);try{if(l=2,o){if(i||(r="next"),a=o[r]){if(!(a=a.call(o,u)))throw TypeError("iterator result is not an object");if(!a.done)return a;u=a.value,i<2&&(i=0)}else 1===i&&(a=o.return)&&a.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=t}else if((a=(s=p.n<0)?u:e.call(n,p))!==c)break}catch(a){o=t,i=1,u=a}finally{l=1}}return{value:a,done:s}}}(e,o,i),!0),d}var c={};function l(){}function d(){}function s(){}a=Object.getPrototypeOf;var p=[][o]?a(a([][o]())):(n(a={},o,(function(){return this})),a),f=s.prototype=l.prototype=Object.create(p);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,n(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return d.prototype=s,n(f,"constructor",s),n(s,"constructor",d),d.displayName="GeneratorFunction",n(s,i,"GeneratorFunction"),n(f),n(f,i,"Generator"),n(f,o,(function(){return this})),n(f,"toString",(function(){return"[object Generator]"})),(e=function(){return{w:u,m:m}})()}function n(t,a,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(n=function(t,a,e,r){function i(a,e){n(t,a,(function(t){return this._invoke(a,e,t)}))}a?o?o(t,a,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[a]=e:(i("next",0),i("throw",1),i("return",2))})(t,a,e,r)}function r(t,a,e,n,r,o,i){try{var u=t[o](i),c=u.value}catch(t){return void e(t)}u.done?a(c):Promise.resolve(c).then(n,r)}function o(t){return function(){var a=this,e=arguments;return new Promise((function(n,o){var i=t.apply(a,e);function u(t){r(i,n,o,u,c,"next",t)}function c(t){r(i,n,o,u,c,"throw",t)}u(void 0)}))}}$((function(){console.log("caratula.trabajador");var t=document.querySelector('meta[name="csrf-token"]'),a=t?t.getAttribute("content"):"";$("#id_nomina").on("change",function(){var t=o(e().m((function t(a){var n,r;return e().w((function(t){for(;;)switch(t.n){case 0:if(n=$(a.currentTarget).val()){t.n=1;break}return $("#caratula").html('<p class="alert alert-info">Seleccione un trabajador de la nomina</p>'),t.a(2);case 1:return t.n=2,window.get_template("/api/get_caratula_nomina/".concat(n));case 2:r=t.v,$("#caratula").html(r);case 3:return t.a(2)}}),t)})));return function(a){return t.apply(this,arguments)}}()),""!=$("#id_nomina").val()&&$("#id_nomina").trigger("change"),$("body").on("click",'[data-toggle="editar-caratula"]',function(){var t=o(e().m((function t(a){var n,r,o,i;return e().w((function(t){for(;;)switch(t.n){case 0:return a.preventDefault(),n=$("#id_nomina").val(),r=window.location.origin,t.n=1,window.get_template("".concat(r,"/api/get_caratula_modal/").concat(n));case 1:o=t.v,(i=$(o)).find('[name="patologia_edit_caratula[]"]').select2(),$("body").append(i),$("#editarCaratulaModal").modal("show");case 2:return t.a(2)}}),t)})));return function(a){return t.apply(this,arguments)}}()),$("body").on("hidden.bs.modal","#editarCaratulaModal",(function(){$("#editarCaratulaModal").remove()})),$("body").on("submit",'[data-form="editar-caratula"]',function(){var t=o(e().m((function t(n){var r,o,i,u,c,l,d,s,p,f,m,v,_,y,g,b;return e().w((function(t){for(;;)switch(t.p=t.n){case 0:if(n.preventDefault(),r=window.get_form(n.currentTarget),o=$('input[name="caratula_id"]').val()||$("#editarCaratulaModal").data("caratula-id")||$("#editarCaratulaModal").attr("data-caratula-id")||null){t.n=1;break}return toastr.error("No se encontró el ID de la carátula para actualizar."),t.a(2);case 1:return i={id_nomina:r.id_nomina||r.trabajador_id_edit_caratula||$("#id_nomina").val()||null,medicacion_habitual:r.medicacion_habitual||r.medicacion_habitual_edit_caratula||"",antecedentes:r.antecedentes||r.antecedentes_edit_caratula||"",alergias:r.alergias||r.alergias_edit_caratula||"",peso:r.peso||r.peso_edit_caratula||"",altura:r.altura||r.altura_edit_caratula||"",imc:r.imc||r.imc_edit_caratula||"",id_patologia:r["id_patologia[]"]||r.id_patologia||r["patologia_edit_caratula[]"]||[]},Array.isArray(i.id_patologia)||(i.id_patologia=i.id_patologia?[i.id_patologia]:[]),i.imc&&""!==i.imc||!i.peso||!i.altura||(i.imc=window.calculate_imc(i.peso,i.altura)),t.p=2,t.n=3,axios.put("/empleados/caratulas/".concat(encodeURIComponent(o)),i,{headers:{"X-CSRF-TOKEN":a,"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},withCredentials:!0});case 3:if(!1!==(null==(l=t.v)||null===(u=l.data)||void 0===u?void 0:u.estado)){t.n=4;break}return toastr.error(l.data.message||"No se pudo actualizar la carátula."),t.a(2);case 4:if(toastr.success((null==l||null===(c=l.data)||void 0===c?void 0:c.message)||"Carátula actualizada con éxito"),$("#editarCaratulaModal").modal("hide"),!(d=i.id_nomina)){t.n=6;break}return t.n=5,window.get_template("/api/get_caratula_nomina/".concat(d));case 5:s=t.v,$("#caratula").html(s);case 6:t.n=8;break;case 7:t.p=7,b=t.v,422===(m=null==b||null===(p=b.response)||void 0===p?void 0:p.status)?(_=null==b||null===(v=b.response)||void 0===v||null===(v=v.data)||void 0===v?void 0:v.errors)?(g=null===(y=Object.values(_)[0])||void 0===y?void 0:y[0],toastr.error(g||"Datos inválidos (422).")):toastr.error("Datos inválidos (422)."):419===m?toastr.error("CSRF inválido o sesión expirada (419). Recargá la página."):403===m?toastr.error("Sin permiso (403)."):toastr.error("Error al actualizar la carátula."),console.error("PUT carátula error:",m,(null==b||null===(f=b.response)||void 0===f?void 0:f.data)||b);case 8:return t.a(2)}}),t,null,[[2,7]])})));return function(a){return t.apply(this,arguments)}}()),$("body").on("change keyup",'input[name="peso_edit_caratula"], input[name="altura_edit_caratula"]',(function(){var t=$("input[name='peso_edit_caratula']").val(),a=$("input[name='altura_edit_caratula']").val();$("input[name='imc_edit_caratula']").val(window.calculate_imc(t,a))})),$("body").on("click",'[data-toggle="usar-datos-caratula"]',(function(){var t=$('[data-content="peso"]').text(),a=$('[data-content="altura"]').text();$('[name="peso"]').val(t),$('[name="altura"]').val(a),$("input[name='imc']").val(window.calculate_imc(t,a)),$("input[name='imc_disabled']").val(window.calculate_imc(t,a))}))}))}});