!function(a){var t={};function n(e){if(t[e])return t[e].exports;var r=t[e]={i:e,l:!1,exports:{}};return a[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=a,n.c=t,n.d=function(a,t,e){n.o(a,t)||Object.defineProperty(a,t,{enumerable:!0,get:e})},n.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},n.t=function(a,t){if(1&t&&(a=n(a)),8&t)return a;if(4&t&&"object"==typeof a&&a&&a.__esModule)return a;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&t&&"string"!=typeof a)for(var r in a)n.d(e,r,function(t){return a[t]}.bind(null,r));return e},n.n=function(a){var t=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(t,"a",t),t},n.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},n.p="/",n(n.s=50)}({50:function(a,t,n){a.exports=n("YLZv")},SuTX:function(a,t){function n(){var a,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function c(n,r,o,i){var c=r&&r.prototype instanceof l?r:l,d=Object.create(c.prototype);return e(d,"_invoke",function(n,e,r){var o,i,c,l=0,d=r||[],s=!1,p={p:0,n:0,v:a,a:m,f:m.bind(a,4),d:function(t,n){return o=t,i=0,c=a,p.n=n,u}};function m(n,e){for(i=n,c=e,t=0;!s&&l&&!r&&t<d.length;t++){var r,o=d[t],m=p.p,f=o[2];n>3?(r=f===e)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=a):o[0]<=m&&((r=n<2&&m<o[1])?(i=0,p.v=e,p.n=o[1]):m<f&&(r=n<3||o[0]>e||e>f)&&(o[4]=n,o[5]=e,p.n=f,i=0))}if(r||n>1)return u;throw s=!0,e}return function(r,d,f){if(l>1)throw TypeError("Generator is already running");for(s&&1===d&&m(d,f),i=d,c=f;(t=i<2?a:c)||!s;){o||(i?i<3?(i>1&&(p.n=-1),m(i,c)):p.n=c:p.v=c);try{if(l=2,o){if(i||(r="next"),t=o[r]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=a}else if((t=(s=p.n<0)?c:n.call(e,p))!==u)break}catch(t){o=a,i=1,c=t}finally{l=1}}return{value:t,done:s}}}(n,o,i),!0),d}var u={};function l(){}function d(){}function s(){}t=Object.getPrototypeOf;var p=[][o]?t(t([][o]())):(e(t={},o,(function(){return this})),t),m=s.prototype=l.prototype=Object.create(p);function f(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,s):(a.__proto__=s,e(a,i,"GeneratorFunction")),a.prototype=Object.create(m),a}return d.prototype=s,e(m,"constructor",s),e(s,"constructor",d),d.displayName="GeneratorFunction",e(s,i,"GeneratorFunction"),e(m),e(m,i,"Generator"),e(m,o,(function(){return this})),e(m,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:c,m:f}})()}function e(a,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(a){o=0}(e=function(a,t,n,r){function i(t,n){e(a,t,(function(a){return this._invoke(t,n,a)}))}t?o?o(a,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):a[t]=n:(i("next",0),i("throw",1),i("return",2))})(a,t,n,r)}function r(a,t,n,e,r,o,i){try{var c=a[o](i),u=c.value}catch(a){return void n(a)}c.done?t(u):Promise.resolve(u).then(e,r)}function o(a){return function(){var t=this,n=arguments;return new Promise((function(e,o){var i=a.apply(t,n);function c(a){r(i,e,o,c,u,"next",a)}function u(a){r(i,e,o,c,u,"throw",a)}c(void 0)}))}}$((function(){console.log("caratula.trabajador");var a=document.querySelector('meta[name="csrf-token"]'),t=a?a.getAttribute("content"):"";$("#id_nomina").on("change",function(){var a=o(n().m((function a(t){var e,r;return n().w((function(a){for(;;)switch(a.n){case 0:if(e=$(t.currentTarget).val()){a.n=1;break}return $("#caratula").html('<p class="alert alert-info">Seleccione un trabajador de la nomina</p>'),a.a(2);case 1:return a.n=2,window.get_template("/api/get_caratula_nomina/".concat(e));case 2:r=a.v,$("#caratula").html(r);case 3:return a.a(2)}}),a)})));return function(t){return a.apply(this,arguments)}}()),""!=$("#id_nomina").val()&&$("#id_nomina").trigger("change"),$("body").on("click",'[data-toggle="editar-caratula"]',function(){var a=o(n().m((function a(t){var e,r,o,i;return n().w((function(a){for(;;)switch(a.n){case 0:return t.preventDefault(),e=$("#id_nomina").val(),r=window.location.origin,a.n=1,window.get_template("".concat(r,"/api/get_caratula_modal/").concat(e));case 1:o=a.v,(i=$(o)).find('[name="patologia_edit_caratula[]"]').select2(),$("body").append(i),$("#editarCaratulaModal").modal("show");case 2:return a.a(2)}}),a)})));return function(t){return a.apply(this,arguments)}}()),$("body").on("hidden.bs.modal","#editarCaratulaModal",(function(){$("#editarCaratulaModal").remove()})),$("body").on("submit",'[data-form="editar-caratula"]',function(){var a=o(n().m((function a(e){var r,o,i,c,u,l,d,s,p,m,f,_,v,g,h,b;return n().w((function(a){for(;;)switch(a.p=a.n){case 0:if(e.preventDefault(),r=window.get_form(e.currentTarget),o=$('input[name="caratula_id"]').val()||$("#editarCaratulaModal").data("caratula-id")||$("#editarCaratulaModal").attr("data-caratula-id")||null){a.n=1;break}return toastr.error("No se encontró el ID de la carátula para actualizar."),a.a(2);case 1:return i={id_nomina:r.id_nomina||r.trabajador_id_edit_caratula||$("#id_nomina").val()||null,medicacion_habitual:r.medicacion_habitual||r.medicacion_habitual_edit_caratula||"",antecedentes:r.antecedentes||r.antecedentes_edit_caratula||"",alergias:r.alergias||r.alergias_edit_caratula||"",peso:r.peso||r.peso_edit_caratula||"",altura:r.altura||r.altura_edit_caratula||"",imc:r.imc||r.imc_edit_caratula||"",id_patologia:r["id_patologia[]"]||r.id_patologia||r["patologia_edit_caratula[]"]||[]},Array.isArray(i.id_patologia)||(i.id_patologia=i.id_patologia?[i.id_patologia]:[]),i.imc&&""!==i.imc||!i.peso||!i.altura||(i.imc=window.calculate_imc(i.peso,i.altura)),a.p=2,a.n=3,axios.put("/empleados/caratulas/".concat(encodeURIComponent(o)),i,{headers:{"X-CSRF-TOKEN":t,"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},withCredentials:!0});case 3:if(!1!==(null==(l=a.v)||null===(c=l.data)||void 0===c?void 0:c.estado)){a.n=4;break}return toastr.error(l.data.message||"No se pudo actualizar la carátula."),a.a(2);case 4:if(toastr.success((null==l||null===(u=l.data)||void 0===u?void 0:u.message)||"Carátula actualizada con éxito"),$("#editarCaratulaModal").modal("hide"),!(d=i.id_nomina)){a.n=6;break}return a.n=5,window.get_template("/api/get_caratula_nomina/".concat(d));case 5:s=a.v,$("#caratula").html(s);case 6:a.n=8;break;case 7:a.p=7,b=a.v,422===(f=null==b||null===(p=b.response)||void 0===p?void 0:p.status)?(v=null==b||null===(_=b.response)||void 0===_||null===(_=_.data)||void 0===_?void 0:_.errors)?(h=null===(g=Object.values(v)[0])||void 0===g?void 0:g[0],toastr.error(h||"Datos inválidos (422).")):toastr.error("Datos inválidos (422)."):419===f?toastr.error("CSRF inválido o sesión expirada (419). Recargá la página."):403===f?toastr.error("Sin permiso (403)."):toastr.error("Error al actualizar la carátula."),console.error("PUT carátula error:",f,(null==b||null===(m=b.response)||void 0===m?void 0:m.data)||b);case 8:return a.a(2)}}),a,null,[[2,7]])})));return function(t){return a.apply(this,arguments)}}()),$("body").on("change keyup",'input[name="peso_edit_caratula"], input[name="altura_edit_caratula"]',(function(){var a=$("input[name='peso_edit_caratula']").val(),t=$("input[name='altura_edit_caratula']").val();$("input[name='imc_edit_caratula']").val(window.calculate_imc(a,t))})),$("body").on("click",'[data-toggle="usar-datos-caratula"]',(function(){var a=$('[data-content="peso"]').text(),t=$('[data-content="altura"]').text();$('[name="peso"]').val(a),$('[name="altura"]').val(t),$("input[name='imc']").val(window.calculate_imc(a,t)),$("input[name='imc_disabled']").val(window.calculate_imc(a,t))}))}))},YLZv:function(a,t,n){n("SuTX"),$((function(){window.location.host;var a=[];$("input[name='peso'],input[name='altura']").on("keyup change",(function(){var a=$('input[name="peso"]').val(),t=$('input[name="altura"]').val();$("input[name='imc']").val(window.calculate_imc(a,t)),$("input[name='imc_disabled']").val(window.calculate_imc(a,t))})),$("#cargar_medicacion").click((function(){$("#cargar_medicacion_abrir").modal("show"),a=[]})),$("#aceptar_suministrar_medicamentos").click((function(){a=[];var t=[];if($.each($(".modal_medicacion_a_suministrar .btn-toolbar"),(function(n,e){if(""==$(e).find("input").val()||"0"==$(e).find("input").val())return!0;var r=parseInt($(e).find('[data-content="stock"]').text()),o=parseInt($(e).find("input").val()),i=$(e).find('[data-content="medicamento"]').text();o>r&&t.push(i),a.push({nombre:i,id_medicamento:$(e).find("input").attr("data-medicamentoid"),suministrados:o})})),t.length>0)return Swal.fire({icon:"error",title:"".concat(t.join(", ")),html:"no dispone".concat(t.length>1?"n":""," de suficiente stock para la cantidad a suministrar.")}),!1;for($("#cargar_medicacion_abrir").modal("hide"),$(".ul_lista_medicamentos").length>0&&$(".ul_lista_medicamentos").remove(),$(".listado_medicaciones_inputs_ocultos input").length>0&&$(".listado_medicaciones_inputs_ocultos input").remove(),i=0;i<a.length;i++)0===a[i].suministrados.length&&"0"===a[i].suministrados||($(".listado_medicaciones").append($("<ul>",{class:"list-group ul_lista_medicamentos small"}).append($("<li>",{class:"list-group-item p-1"}).append($("<div>",{text:"".concat(a[i].nombre,":  ").concat(a[i].suministrados)})))),$(".listado_medicaciones_inputs_ocultos").append($("<input>",{type:"hidden",name:"medicaciones[]",value:"".concat(a[i].id_medicamento,",").concat(a[i].suministrados)})));$(".listado_medicaciones ul li").css("color","grey")})),$("#medicamentoSearch").on("input",(function(){var a=$(this).val().toLowerCase();$(".btn-toolbar").each((function(){$(this).find("h6").text().toLowerCase().includes(a)?$(this).show():$(this).hide()}))})),$("#guarda_consulta").click((function(a){a.preventDefault(),$("#consulta_confirmacion_final").modal("show"),$("#consulta_crear_ok").click((function(a){$("#form_guardar_consulta_medica").submit(),$("#consulta_confirmacion_final").modal("hide")}))})),$(".select_2").select2(),$("#data_picker_gral").datepicker()}))}});